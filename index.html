<!DOCTYPE HTML>
<html>
	<head>
		<title>50 Years of Terrorism</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<style>
			.rect {
			    background-color: #484848;
			}

			#cluster g{
				stroke:#000;
				stroke-width: 0.15;
			}

			.node {
			  font: 300 11px "Helvetica Neue", Helvetica, Arial, sans-serif;
			}

			.node:hover {
			  fill: #000;
			}

			.link {
			  stroke: #000;
			  stroke-opacity: 0.4;
			  fill: none;
			  pointer-events: none;
			}

			.node:hover,
			.node--source,
			.node--target {
			  font-weight: 700;
			}

			.node--source {
			  font-weight: 700;
			}

			.node--target {
			  	font-weight: 700;
			}

			.link--ennemy { /*rouge*/
				stroke-opacity: 0.4;
				pointer-events: none;
				fill: none;
				stroke: #d62728;
			}

			.link--friends { /*vert*/
				stroke-opacity: 0.4;
				pointer-events: none;
				fill: none;
				stroke: #2ca02c;
			}

			.link--ennemy--hover{
				stroke-opacity: 1;
				stroke-width: 2px;
			}

			.link--friends--hover{
				stroke-opacity: 1;
				stroke-width: 2px;
			}
			div.tooltip {	
			    position: absolute;			
			    text-align: center;	
			    padding: 10px;				
			    font: 12px sans-serif;		
			    background: rgba(0, 0, 0, 0.8);	
			    border: 0px;		
			    border-radius: 8px;			
			    pointer-events: none;			
			}
		</style>
	</head>
	<body class="landing">

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Banner -->
					<section id="banner">
						<div class="inner">
							<h2>50 Years of Terrorism</h2>
							<p><a href="https://github.com/christlf">Christian Abbet</a>, 
							<a href="https://github.com/nicomasserey">Nicolas Masserey</a> &
							<a href="https://github.com/AlexandrePoussard">Alexandre Pousssard</a></p>
						</div>
						<a href="#abstract" class="more scrolly">Learn More</a>
					</section>


				<!-- Abstract -->
					<section id="abstract" class="spotlight">
						<div class="image"><img src="data/war.jpg" alt="war"/></div>
						<div class="content txt">
							<h2>Abstract</h2>
							<p>Terrorism is a subject largely covered in the media, and, unfortunately, we became accustomed to its presence worldwide, particularly over the last decade. Nevertheless, the problem we are facing today is not new. The source of certain conflicts dates from multiple decades, some of which are still lasting today. Our goal is to track and vizualize terrorism evolution through the past 50 years based on "The Global Terrorism Database". There are many questions we can ask ourselves about terrorism, such as "Did attack mediums & reasons change over the years ?" or "Can we discriminate current/future conflictual zones ?". It would be presumptuous from us to say that we are going to solve major issues, or even predict futur attacks. However, through the exploration of the dataset, and by trying to answer those interrogations, we aim to grasp an overview and a better understanding to the evolution of terrorism.</p>
						</div>
					</section>

				<!-- Map One -->
					<section id="interactive" class="wrapper style2 special" style="background-color: black;">
						<div class="inner">
							<header class="major txt">
								<h2>A Brief Overview of Terrorism</h2>
								<p style="padding-top: 5%;">
									Terrorism, as described by the Oxford dictionary is "The unlawful use of violence and intimidation, especially against civilians, in the pursuit of political aims."  The term comes from the late 18th century (in reference to the rule of the Jacobin faction during the the period of the French Revolution known as the Terror). We are a long way from the 18th century, however, Humans have not left behind this terrible invention. <br>
									Since more than 200 years, terror attacks are plaguing the world, but we will not be able to go that far in history. Our dataset entries begin in 1970, and has been updated for the last time in late 2016. As an initial approach to understand that terrorism has always been a global problem, you will find a map displaying the location of attacks for each years beginning in 1970 until today. Fortunately, attacks are not happening always at the same place, but we see that the phenomenon is present every years, at different locations. Feel free to play with the map, stop during a specific year and zoom to a particular place.
								</p>
								<iframe src="data/interactive_map.html" name="inter" style="width:100%; height: 600px;" class="map_scroll"></iframe>
							</header>
						</div>
					</section>


				<!-- Statistics1 -->	
					<section id="statistics1" class="wrapper alt style4 txt">
						<!-- barchart -->
						<section class="spotlight txt">
							<div class="image" style="padding-left: 7.5%;">
								<h2 style="padding-top: 50px;">Some Statistics</h2>
								<p>
									Over the years, the number of attacks, and, as a result, the number of casualties linked to them has changed. There is a slow but steady increase of attacks from 1970 to 1992. Please note that in 1993 was not a year where a worldwide ceasefire was achieved, the lack of data comes from a misplacement of the data collected resulting in the complete loss of the year entries. That being said, a reduction in the number of terror attack is visible from 1994 to 2005. After that, the number of attacks increased again, with a peak in 2014, before slowly fading again. <br>
									Those fluctuations of attacks, and casualties, are closely linked to the geopolitical situation of the world. For example, the high increase in the  number of attacks in 1989-1992 is linked to the collapse of the Soviet bloc as well as the first Gulf War and the turmoil it created. In 1997, the Algerian Civil war created a peak of victims. An other event can be highlighted in 2001, with many casualties linked to the 9/11 Twin Tower terror attack. Since 2012, the number of incident and casualties has particularly increased due to the appearance of Daesh and the multiplication of attacks led by this terrorist group. 
								</p>
							</div>
							<div class="content">
								<img src="data/evolution_attacks-1.svg" alt="evolution_attacks" style="max-width: 100%;padding-top: 70px; margin-left: 20px;"/><br><br>
								<img src="data/evolution_casualties-1.svg" alt="evolution_casualties" style="max-width: 100%; padding-bottom: 70px; margin-left: 20px;"/>
							</div>
						</section>

						<!-- heatmap -->
						<section class="spotlight txt" style="padding-top: 50px; padding-bottom: 35px;">
							<div class="image" style="margin-right: 4%;">
								<p>
									Here we have a better visualization of the evolution of casualties over the years divided by months. The idea behind this figure was to see if there is a timely pattern when terror attacks would occur more often. There is not. We have however more precise view with more informations. We can for example spot the Rwandan Genocide that happened in April 1994. The Algerian Civil War and the <a href="https://en.wikipedia.org/wiki/Wilaya_of_Relizane_massacres_of_30_December_1997massacre">massacres</a> perpetrated in December also stand out. As before, we can observe a peak of victims during the month of September 2011. The most terrible month happened in 2014, when in June, ISIS committed terrible attacks like the <a href="https://en.wikipedia.org/wiki/Badush_prison_massacre">Badush prison massacre</a>. 
								</p>
							</div>
							<div class="content">
								<img src="data/heatmap_casualties-1.svg" alt="heatmap_casualties" style="max-width: 95%;"/>
							</div>
						</section>

						<section class="spotlight txt" style="padding-top: 35px; padding-bottom: 35px; background-color: rgba(0, 0, 0, 0.15);">
							<div class="image" style="margin-right: 4%; padding-left: 7.5%;">
								<p>
									An other way to visualize the attacks is to sort them by region and show the highest occurrences, and a similar approach ca be done for casualties. We see here for example a very high number of attacks during year 1970 and 1971 in North America, but according to the casualty heat map visualization, there has not be many victims in this region at that time. After some research, we found an explanation for this, a forgotten period during which many non lethal <a href="http://time.com/4501670/bombings-of-america-burrough/">terror attacks were conducted by left-wing activist in USA</a>. During the seventies also, many attacks happened in Europe. The very high number of attacks and casualties is linked to the Northern Ireland conflict, also called <a href="https://en.wikipedia.org/wiki/The_Troubles">The Troubles</a>, and the fight for independence of Basque Country in Spain where <a href="https://fr.wikipedia.org/wiki/Euskadi_ta_Askatasuna">ETA</a> was terrorizing population. Moving forward in time, in 1981 to 1983 in Central America, two civil wars in <a href="https://en.wikipedia.org/wiki/Guatemalan_Civil_War">Guatemala</a> and <a href="https://en.wikipedia.org/wiki/Salvadoran_Civil_War">Salvador</a> are responsible for the high amount of both attacks and casualties in this region at that time. South America has also its amount of terrorism during the conflicts in Columbia, Chile and Peru during the period 1983 to 1990. Since years 2000s, Middle East and North Africa became more and more unstable, with <a href="https://en.wikipedia.org/wiki/2003_invasion_of_Iraq">second Gulf War</a> and the <a href="https://en.wikipedia.org/wiki/Arab_Spring">Arab Spring</a>, and even more lately the appearance of ISIS, this region is going under a high amount of attacks leading to a significant amount of casualties.
								</p>
							</div>
							<div class="content">
								<img src="data/heatmap_reagionattacks-1.svg" alt="heatmap_reagionattacks" style="max-width: 100%;padding-bottom: 14.5%;"/>
								<img src="data/heatmap_regioncasualties-1.svg" alt="heatmap_regioncasualties" style="max-width: 100%; padding-top: 5%;"/>
							</div>
						</section>
					</section>


				<!-- Statistics2 -->
				<section id="statistics2" class="wrapper alt style2" style="padding-top: 35px; padding-bottom: 35px;">
					<!-- targets & weapons -->
					<!-- <section class="spotlight txt" style="background-color: rgb(46,56,66);"> -->
						<div class="image">
							<img src="data/weapons-1.png" alt="weapons" style="max-width: 75%; padding-left: 25%;"/>
						</div>

						<div class="txt" style="width: 100%; padding-left: 14%; padding-right: 13%; padding-top: 0%;">
						<p style="color: white;">
							 Above is a representation of the means used to conduct attacks. One can see that over the years, the use of explosive devices, firearms or the act of burning something where the most used weapons. The increase of attacks labelled as melee is linked to the fact that according to the definition, melee correspond to "A weapon—targeting people rather than property—that does not involve a projectile in which the user and target are in contact with it simultaneously.". Many incident from civil wars or regional troubles are labelled as melee, explaining the increase. More worrisome is to see the slow growth of chemical weapon use throughout the years. Also, we can see an increase in the use of vehicle to commit attacks, such as the recent one we saw across Western Europe.
						</p>
					</div>

						<div class="content">
							<img src="data/targets-1.png" alt="targets" style="max-width: 75%; padding-left: 25%;"/>
						</div>
					<!-- </section> -->
					<div class="txt" style="width: 100%; padding-left: 14%; padding-right: 13%;">
						<p style="color: white;">
							Regarding the evolution of targets, we can see that the main targets of terror attacks are Police, Government, Military, Business or Private Citizen & Property. One can notice the increase of incident targeting Religious Figures/Institution which were rare in the 70s and seem to become common over the last decade. A similar pattern is observable for Educational Institutions. The typical targets of terrorism has now changed, and additionally to locations symbolizing the government or its army, terrorist group are also more and more targeting private citizens or places related to religion or education. Today’s terrorism aims at destabilizing government, but also destroy knowledge and bring back obscurantism.
						</p>
					</div>
				</section>


				<!-- Top 25 -->
				<section id="top25" class="wrapper alt style4 txt" style="padding-top: 50px; padding-bottom: 35px; background-color: rgb(154, 179, 203);">
					<div class="inner">
						<header class="major">
							<p>
								You’ll find on the next map the 25 deadliest terror attacks registered in the dataset. By clicking on a pin you will have detailed informations about the attack. By exploring this map a bit you’ll find out that 9 of the deadliest attacks were perpetrated by ISIS after 2014.
							</p>
							<iframe src="data/top25.html" name="top" style="width:100%; height: 600px;"></iframe>
						</header>
					</div>
				</section>


				<!-- Location Terrorists -->
				<section id="location" class="wrapper alt style1" style="background-color: black; padding-top: 50px; padding-bottom: 35px;">
					<div class="inner txt">
						<header class="major">
							<p>
								On the map below are the approximate location of terrorist group according to the position of their attacks. Dots color represent the number of people killed by the group (green is zero, turning to red as the number increase) and the size of the dot illustrate the number of attack perpetrated by the group. By clicking on a dot, it displays more informations.
							</p>
							<iframe src="data/location_terrorists.html" name="location_terrorists" style="width:100%; height: 600px; padding-top: 2%;"></iframe>
						</header>
					</div>
				</section>

				<!-- Chord Diagram -->
				<section id="diagram" class="wrapper alt style2" style="text-align: center;padding-top: 50px; padding-bottom: 35px;">
					<div class="inner txt">
						<header class="major">
							<p>
								With this general approach of informations and global statistics about terrorism over the past decades, we have gained a broad vision of terrorism evolution. In the mind of a millennial, terrorism is linked to Middle East and sadly, to Islam. Thanks to the exploration above, it reminds us that terrorism has been present for many years, and in any region. Each region had its worst moment, early 70s for North America, the 70s in Europe, the 80s in Central and South America, and lately the South Asia and the Middle East.  <br>
								In the final part below, we focus on this particular region by trying a novel graph-theory approach to map the interactions between different terrorist group present in the area. Some terror attacks are claimed by multiple groups, as if they cooperated to perpetrate it. Some others attacks are imputed to one group, while other group dispute the claim of the attack. Based on that, we could compute the relations of terrorist groups in Middle East, as displayed on the chord diagram below. A green chord between two groups mean collaboration, whereas a red chord mean quarrel. This approach allowed us to cluster batches of group collaborating together.							</p>
							
						</header><div id="ennemy"></div>
					</div>
				</section>

				<!-- Cluster Map -->
				
				<section id="diagram" class="wrapper alt style1" style="background-color: #484848; padding-top: 50px; padding-bottom: 35px;">
					<div class="inner txt">
						<header class="major">
							<p style="color: white;">
								Finally, by combining informations from the locations and date of each group terrorist attacks, we could infer their region of influence. In addition to the relations between groups displayed above, one can have a better understanding of why certain groups might dispute their boundaries, as they try to extend their area of influence.
							</p>
						</header>
						<div id="cluster" style="width: 100%; height: 400px;"></div>
						<div><p style="color: white;">(Go over the dots to display the names)</p></div>

					</div>
				</section>
				

				<!-- Footer -->
					<footer id="footer">
						<ul class="copyright">
							<li>&copy; ADamnTeam</li><li><a href="mailto:apoussard@gmail.com" class="icon fa-envelope-o"> Contact Us<span class="label"></span></a></li>
						</ul>
					</footer>
			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>
			<script src="https://d3js.org/d3.v4.min.js"></script>
			<script src="https://d3js.org/d3-hierarchy.v1.min.js"></script>
			<script type="text/javascript">
				$(document).ready(function() {
				    $(window).scroll(function() {
				        $('.txt').each(function(i) {
				            var bottom_of_object = $(this).position().top + $(this).outerHeight();
				            var bottom_of_window = $(window).scrollTop() + $(window).height();
				            if(bottom_of_window*1.4 > bottom_of_object) {
				                $(this).animate({'opacity':'1'},1500);
				            }
        				}); 
				    });
				});


				var diameter = 960,
				    radius = diameter / 2,
				    innerRadius = radius - 310;

				var cluster = d3.cluster()
				    .size([360, innerRadius]);

				var line = d3.radialLine()
				    .curve(d3.curveBundle.beta(0.95))
				    .radius(function(d) { return d.y; })
				    .angle(function(d) { return d.x / 180 * Math.PI; });

				var svg = d3.select("#ennemy").append("svg")
				    .attr("width", diameter)
				    .attr("height", diameter)
				  	.append("g")
				    .attr("transform", "translate(" + radius + "," + radius + ")");

				var link = svg.append("g").selectAll(".link"),
				    node = svg.append("g").selectAll(".node");

				var projection = d3.geoEquirectangular()
		        	.scale(650)
		        	.translate([195, 500]);

				var path = d3.geoPath()
    				.projection(projection);

				// Define the div for the tooltip
				var div = d3.select("#cluster").append("div")	
				    .attr("class", "tooltip")				
				    .style("opacity", 0);


    			var svg2 = d3.select('#cluster').append('svg')
    				.attr("class", "rect")
		        	.attr('width', '100%')
		        	.attr('height', 400)
		        	.append("g");

				d3.json("https://raw.githubusercontent.com/AdaTeamElec/adateamelec.github.io/master/data/countries_custom.geo.json", function(error, json){
			    	d3.json("data/middle_east_late2016.json", function(error2, data){
			    		if (error) throw error;

			    		svg2.selectAll("path")
							.data(json.features)
							.enter()
							.append("path")
							.attr("d", path)
							.style("fill", 'white')
							.attr("id", function(d) { return d.id; });

						svg2.selectAll("text")
							.data(json.features)
							.enter().append("text")
							.attr("transform", (d) => "translate(" + path.centroid(d) + ")")
							.attr("dx", -5)
							.attr('font-size', '35%')
							.text((d) => d.properties.name);

						svg2.append("g")
						    .attr("class", "bubble")
						  	.selectAll("circle")
						    .data(data)
						  	.enter().append("circle")
						  	.attr("cx", function(d) {	 return projection([d.longitude, d.latitude])[0];	})
						  	.attr("cy", function(d) {	return projection([d.longitude, d.latitude])[1];	})
						  	.attr("r",  function(d) {	return d.radius*5;	})
						    .style('fill', function(d){
						    	switch(d.name){
						    		case "Palestinian Extremists": return "rgb(250, 141, 103)"; break;
					        		case "Fetullah Terrorist Organization": return "pink"; break;
					        		case "Barqa Province of the Islamic State": return "#ffdb0e"; break;
					        		case "Kurdistan Workers' Party (PKK)": return "green"; break;
					        		case "Sinai Province of the Islamic State": return "#00e1ff"; break;
					        		case "Hadramawt Province of the Islamic State": return "blue"; break;
					        		case "Al-Qaida in the Arabian Peninsula (AQAP)": return "rgb(203, 111, 66)"; break;
					        		case "Houthi extremists (Ansar Allah)": return "#0fb7ff"; break;
									case "Adan-Abyan Province of the Islamic State": return "rgb(105, 193, 165)"; break;
					        		case "Islamic State of Iraq and the Levant (ISIL)": return "red"; break;
					        		case "Al-Nusrah Front": return "rgb(230, 140, 194)"; break;
					        		case "Tripoli Province of the Islamic State": return "orange"; break;
						    	}
						    })
						    .on('mouseover', function(d){	
							console.log('name', d, d.name)
							d3.selectAll("circle").style("fill", function(dr){
								if(dr.name == d.name) {
									switch(dr.name){
								    		case "Palestinian Extremists": return "rgb(250, 141, 103)"; break;
										case "Fetullah Terrorist Organization": return "pink"; break;
										case "Barqa Province of the Islamic State": return "#ffdb0e"; break;
										case "Kurdistan Workers' Party (PKK)": return "green"; break;
										case "Sinai Province of the Islamic State": return "#00e1ff"; break;
										case "Hadramawt Province of the Islamic State": return "blue"; break;
										case "Al-Qaida in the Arabian Peninsula (AQAP)": return "rgb(203, 111, 66)"; break;
										case "Houthi extremists (Ansar Allah)": return "#0fb7ff"; break;
											case "Adan-Abyan Province of the Islamic State": return "rgb(105, 193, 165)"; break;
										case "Islamic State of Iraq and the Levant (ISIL)": return "red"; break;
										case "Al-Nusrah Front": return "rgb(230, 140, 194)"; break;
										case "Tripoli Province of the Islamic State": return "orange"; break;
							    		}
								}
								return 'grey'	
							})
						    	
							div.transition()		
								.duration(200)		
								.style("opacity", .9);		
							    div.html(d.name)
								.style("left", (d3.event.pageX) + "px")		
                						.style("top", (d3.event.pageY - 28) + "px");		
							})
						    .on("mouseout", function(d) {

							d3.selectAll("circle").style("fill", function(dr){
								switch(dr.name){
							    		case "Palestinian Extremists": return "rgb(250, 141, 103)"; break;
									case "Fetullah Terrorist Organization": return "pink"; break;
									case "Barqa Province of the Islamic State": return "#ffdb0e"; break;
									case "Kurdistan Workers' Party (PKK)": return "green"; break;
									case "Sinai Province of the Islamic State": return "#00e1ff"; break;
									case "Hadramawt Province of the Islamic State": return "blue"; break;
									case "Al-Qaida in the Arabian Peninsula (AQAP)": return "rgb(203, 111, 66)"; break;
									case "Houthi extremists (Ansar Allah)": return "#0fb7ff"; break;
										case "Adan-Abyan Province of the Islamic State": return "rgb(105, 193, 165)"; break;
									case "Islamic State of Iraq and the Levant (ISIL)": return "red"; break;
									case "Al-Nusrah Front": return "rgb(230, 140, 194)"; break;
									case "Tripoli Province of the Islamic State": return "orange"; break;
						    		}
								
							})		
						        div.transition()		
							    .duration(500)		
							    .style("opacity", 0);
	
   						     });
			    	});
				});

				d3.json("data/clusterN1.json", function(error, classes) {
			        if (error) throw error;

			        var root = d3.hierarchy(packageHierarchy(classes), (d) => d.children);
			        var links = packageImports(root.descendants());
			        cluster(root);

			        var nodes = root.descendants();

			        link = link
			            .data(links)
			            .enter().append('path')
			            .attr('class', function(d){
			            	if (d.ennemy === 'true') {
			            		return 'link--ennemy';
			            	} else {
			            		return 'link--friends';
			            	}
			            })
			            .attr('d', d => line(d.source.path(d.target)));

			        node = node
			            .data(nodes.filter(function(n) { return !n.children; }))
			            .enter().append("text")
			            .attr("class", 'node')
			            .attr("dy", ".31em")
			            .attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + (d.y + 8) + ",0)" + (d.x < 180 ? "" : "rotate(180)"); })
			            .style("text-anchor", function(d) { return d.x < 180 ? "start" : "end"; })
			            .style("fill", function(d) {	return d.data.color;	})
			            .text(function(d) { return d.data.key; })
			            .on("mouseover", mouseovered)
			            .on("mouseout", mouseouted);
			    });


		        function mouseovered(d) {
			        node
			            .each(function(n) { n.target = n.source = false; });

			        link
			            .classed("link--ennemy--hover", function(l) { if (l.target === d & l.ennemy === 'true') return l.source.source = true; })
			            .classed("link--friends--hover", function(l) { if (l.target === d & l.ennemy === 'false') return l.target.target = true; })
			            .filter(function(l) { return l.target === d || l.source === d; })
			            .each(function() { this.parentNode.appendChild(this); });

			        node
			            .classed("node--target", function(n) { return n.target;	})
			            .classed("node--source", function(n) { return n.source; });
			    }

			    function mouseouted(d) {
			        link
			            .classed("link--ennemy--hover", false)
			            .classed("link--friends--hover", false);

			        node
			            .classed("node--target", false)
			            .classed("node--source", false);
			    }


			    d3.select(self.frameElement).style("height", diameter + "px");

			    // Lazily construct the package hierarchy from class names.
			    function packageHierarchy(classes) {
			        var map = {};

			        function find(name, data) {
			            var node = map[name], i;
			            if (!node) {
			                node = map[name] = data || {name: name, children: []};
			                if (name.length) {
			                    node.parent = find(name.substring(0, i = name.lastIndexOf(".")));
			                    node.parent.children.push(node);
			                    node.key = name.substring(i + 1);
			                }
			            }
			            return node;
			        }

			        classes.forEach(function(d) {
			            find(d.name, d);
			        });

			        return map[""];
			    }

			    // Return a list of imports for the given array of nodes.
			    function packageImports(nodes) {
			        var map = {},
			            imports = [];

			        // Compute a map from name to node.
			        nodes.forEach(function(d) {
			        	switch (d.data.cluster){
			        		case "0": d.data.color = "red"; break;
			        		case "1": d.data.color = "white"; break;
			        		case "2": d.data.color = "#ffdb0e"; break;
			        		case "3": d.data.color = "green"; break;
			        		case "4": d.data.color = "orange"; break;
			        		case "5": d.data.color = "#0fb7ff"; break;
			        		case "6": d.data.color = "rgb(203, 111, 66)"; break;
			        		case "7": d.data.color = "#00e1ff"; break;
						case "8": d.data.color = "rgb(105, 193, 165)"; break;
			        		case "9": d.data.color = "rgb(250, 141, 103)"; break;
			        		case "10": d.data.color = "rgb(230, 140, 194)"; break;
			        	}
			            map[d.data.name] = d;
			        });

			        // For each import, construct a link from the source to target node.
			        nodes.forEach(function(d) {
			            if (d.data.ennemy) d.data.ennemy.forEach(function(i) {
			                imports.push({source: map[d.data.name], target: map[i], ennemy:"true"});
			            });

			            if (d.data.friends) d.data.friends.forEach(function(i) {
			                imports.push({source: map[d.data.name], target: map[i], ennemy:"false"});
			            });
			        });
			        return imports;
			    }
			</script>
	</body>
</html>
